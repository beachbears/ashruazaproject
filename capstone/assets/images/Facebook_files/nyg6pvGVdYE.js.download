;/*FB_PKG_DELIM*/

__d("BaseInfiniteScrollList.old.react",["BaseScrollableAreaContext","CometDialogContext","CometInfiniteScrollTrigger.react","CometScrollableArea.react","FBLogger","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext;function a(a){var b=d("react-compiler-runtime").c(28);if(b[0]!==a){var e=a.forceBrowserDefault,f=a.items,g=a.loadingIndicator;a.nextFocusableElementRef;var h=a.onScroll,k=a.onScrollBottom,l=a.onScrollTop;a.prevFocusableElementRef;var m=a.renderItem,n=a.role,o=a.testid,p=a.xstyle,q=babelHelpers.objectWithoutPropertiesLoose(a,["forceBrowserDefault","items","loadingIndicator","nextFocusableElementRef","onScroll","onScrollBottom","onScrollTop","prevFocusableElementRef","renderItem","role","testid","xstyle"]);e=e;f=f;g=g;h=h;k=k;l=l;m=m;n=n;o=o;p=p;q=q;b[0]=a;b[1]=e;b[2]=f;b[3]=g;b[4]=h;b[5]=k;b[6]=l;b[7]=m;b[8]=n;b[9]=o;b[10]=q;b[11]=p}else e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],l=b[6],m=b[7],n=b[8],o=b[9],q=b[10],p=b[11];a=j(c("CometDialogContext"));var r=j(c("BaseScrollableAreaContext"));a==null&&r.length>0&&c("FBLogger")("comet_ui").blameToPreviousFrame().warn("For XPlat React compatibility, BaseInfiniteScrollList should not be nested inside scrollable containers such as BaseScrollableArea with the same orientation. It may cause unexpected behaviors and break infinite scroll in React Native platforms.");b[12]!==f||b[13]!==m?(a=f.map(m),b[12]=f,b[13]=m,b[14]=a):a=b[14];b[15]!==g||b[16]!==q?(r=i.jsx(c("CometInfiniteScrollTrigger.react"),babelHelpers["extends"]({},q,{children:g})),b[15]=g,b[16]=q,b[17]=r):r=b[17];b[18]!==e||b[19]!==h||b[20]!==k||b[21]!==l||b[22]!==n||b[23]!==a||b[24]!==r||b[25]!==o||b[26]!==p?(f=i.jsxs(c("CometScrollableArea.react"),{forceBrowserDefault:e,horizontal:!1,onScroll:h,onScrollBottom:k,onScrollTop:l,role:n,testid:void 0,xstyle:p,children:[a,r]}),b[18]=e,b[19]=h,b[20]=k,b[21]=l,b[22]=n,b[23]=a,b[24]=r,b[25]=o,b[26]=p,b[27]=f):f=b[27];return f}g["default"]=a}),98);
__d("BaseInfiniteScrollList.react",["cr:5501","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var c=d("react-compiler-runtime").c(2),e;c[0]!==a?(e=i.jsx(b("cr:5501"),babelHelpers["extends"]({},a)),c[0]=a,c[1]=e):e=c[1];return e}g["default"]=a}),98);
__d("CometMessagingJewelCommunitiesQPBannerContainerPassthroughQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6488000047956149"}),null);
__d("FBIconAppFacebookCircleFilled12.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").G,{stroke:"none",strokeWidth:1,fillRule:"evenodd",children:i.jsx(d("XPlatReactSVG").Path,{d:"M103.5 917a5.997 5.997 0 0 0-1.45 11.817v-3.984h-1.238V923h1.239v-.79c0-2.042.924-2.988 2.927-2.988.38 0 1.035.075 1.303.149v1.661a7.953 7.953 0 0 0-.693-.022c-.984 0-1.363.373-1.363 1.342V923h1.96l-.335 1.833h-1.623v4.119A5.997 5.997 0 0 0 103.5 917",transform:"translate(-450 -1073) translate(352.5 156.5)"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("FDSRestrictedAccountsPlusIcon",["ix","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";a=d("fbicon")._(h("483772"),20);g["default"]=a}),98);
__d("LSClearDiscoverableChatsParticipantsAndRanges",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.sequence([function(a){return b.forEach(b.db.table(248).fetch(),function(a){return a["delete"]()})},function(a){return b.forEach(b.db.table(249).fetch(),function(a){return a["delete"]()})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxClearDiscoverableChatsParticipantsAndRangesStoredProcedure";a.__tables__=["discoverable_chat_participants","discoverable_chat_participants_ranges_v2__generated"];e.exports=a}),null);
__d("LSClearDiscoverableChatsParticipantsAndRangesStoredProcedure",["LSClearDiscoverableChatsParticipantsAndRanges","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a){a=a.storedProcedure(c("LSClearDiscoverableChatsParticipantsAndRanges"));return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSUpsertDiscoverableChatsParticipantsRanges",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(249).put({threadId:a[0],minName:"",source:a[4],maxName:a[5],isLoadingBefore:!1,isLoadingAfter:a[2],hasMoreBefore:!1,hasMoreAfter:a[1],nextPageCursor:a[3]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpsertDiscoverableChatsParticipantsRangesStoredProcedure";a.__tables__=["discoverable_chat_participants_ranges_v2__generated"];e.exports=a}),null);
__d("LSFetchDiscoverableChatParticipants",["LSIssueNewTask","LSUpsertDiscoverableChatsParticipantsRanges"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[7]=b.syncGroup,c.i64.neq(d[7],void 0)?d[6]=d[7]:d[6]=c.i64.cast([0,1]),d[0]=d[6])})},function(d){return c.storedProcedure(b("LSUpsertDiscoverableChatsParticipantsRanges"),a[0],!1,!0,"",a[2],a[3])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[2]=c.i64.cast([0,1]):(b=a.item,d[7]=b.syncGroup,c.i64.neq(d[7],void 0)?d[6]=d[7]:d[6]=c.i64.cast([0,1]),d[2]=d[6])})},function(e){return d[4]=new c.Map(),d[4].set("thread_key",a[0]),d[4].set("cursor",a[1]),d[4].set("source",a[2]),d[4].set("sync_group",d[2]),d[5]=c.toJSON(d[4]),c.storedProcedure(b("LSIssueNewTask"),"fetch_discoverable_chat_participant_list",c.i64.cast([0,110006]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxFetchDiscoverableChatParticipantsStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSFetchDiscoverableChatParticipantsStoredProcedure",["LSFetchDiscoverableChatParticipants","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSFetchDiscoverableChatParticipants"),e.threadKey,e.cursor,e.source,e.maxName);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSUpdateMessageSearchQueryStatus",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(70).put({query:a[0],type_:a[1],threadKeyV2:a[5]==null?b.i64.cast([0,0]):a[5],status:a[2],hasNextPage:a[3],nextPageCursor:a[4],resultCount:a[6]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSSearchUpdateMessageSearchQueryStatusStoredProcedure";a.__tables__=["message_search_queries"];e.exports=a}),null);
__d("LSIssueMessageSearchQuery",["LSIssueNewTask","LSUpdateMessageSearchQueryStatus"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(d){return c.storedProcedure(b("LSUpdateMessageSearchQueryStatus"),a[0],a[1],c.i64.cast([0,1]),void 0,a[3],a[2],c.i64.cast([0,0]))},function(e){return d[0]=new c.Map(),d[0].set("query",a[0]),d[0].set("type",a[1]),d[0].set("thread_key",a[2]),d[0].set("next_page_cursor",a[3]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"message_search",c.i64.cast([0,107]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSSearchIssueMessageSearchQueryStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSIssueMessageSearchQueryStoredProcedure",["LSIssueMessageSearchQuery","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSIssueMessageSearchQuery"),e.query,e.type_,e.threadKey,e.nextPageCursor);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MAWCutoverQPLLogger",["QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h={instanceKey:0,isInProgress:!1};function a(a){h.isInProgress&&c("QPLUserFlow").endCancel(c("qpl")._(1056840990,"2431"),{instanceKey:h.instanceKey});c("QPLUserFlow").start(c("qpl")._(1056840990,"2431"),{annotations:{bool:{is_dtc:a}},instanceKey:++h.instanceKey,timeoutInMs:1e4});h.isInProgress=!0;return h.instanceKey}function b(a,b,d){if(a==null)return;c("QPLUserFlow").addPoint(c("qpl")._(1056840990,"2431"),b,babelHelpers["extends"]({instanceKey:a},d))}function d(a,b){if(a==null)return;c("QPLUserFlow").addAnnotations(c("qpl")._(1056840990,"2431"),b,{instanceKey:a})}function e(a){if(a==null)return;h.isInProgress=!1;c("QPLUserFlow").endSuccess(c("qpl")._(1056840990,"2431"),{instanceKey:a})}function f(a,b){if(a==null)return;c("QPLUserFlow").endFailure(c("qpl")._(1056840990,"2431"),b,{instanceKey:a})}g.startQpl=a;g.addPoint=b;g.addAnnotations=d;g.endSuccess=e;g.endFailure=f}),98);
__d("MAWFTSMergeCutoverSearchResults",["fbt","I64"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function a(a,b){var c,e;c=(i||(i=d("I64"))).add((c=a.matchCount)!=null?c:(i||(i=d("I64"))).of_string("1"),(c=b.matchCount)!=null?c:(i||(i=d("I64"))).of_string("1"));b=i.max((e=a.messageTimestampMs)!=null?e:(i||(i=d("I64"))).minus_one,(e=b.messageTimestampMs)!=null?e:(i||(i=d("I64"))).minus_one);return babelHelpers["extends"]({},a,{contextLine:h._(/*BTDS*/"__JHASH__MOcENwPdyTO__JHASH__",[h._plural(i.to_int32(c),"number")]).toString(),matchCount:c,matchLengths:void 0,matchOffsets:void 0,messageId:void 0,messageTimestampMs:(i||(i=d("I64"))).equal(b,(i||(i=d("I64"))).minus_one)?void 0:b})}g.mergeCutoverSearchResults=a}),226);
__d("MAWFTSUniversalSearchQPLLogger",["QPLUserFlow","emptyFunction","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h={hasStarted:!1,instanceKey:5e3},i=c("qpl")._(25301522,"2409");function a(){h.hasStarted&&j();h.instanceKey++;h.hasStarted=!0;c("QPLUserFlow").start(i,{annotations:{bool:{isInThread:!1}},instanceKey:h.instanceKey});return h.instanceKey}function j(a){if(!h.hasStarted||a!=null&&h.instanceKey!==a)return;h.hasStarted=!1;c("QPLUserFlow").endCancel(i,{instanceKey:h.instanceKey})}function b(a){var b=a.annotations,d=a.instanceKey;a=a.point;if(!h.hasStarted||d!=null&&h.instanceKey!==d)return;c("QPLUserFlow").addPoint(i,a,{instanceKey:h.instanceKey});b!=null&&k({annotations:b,instanceKey:h.instanceKey})}function k(a){var b=a.annotations;a=a.instanceKey;if(!h.hasStarted||a!=null&&h.instanceKey!==a)return;c("QPLUserFlow").addAnnotations(i,b,{instanceKey:h.instanceKey})}function d(a){if(!h.hasStarted||a!=null&&h.instanceKey!==a)return;h.hasStarted=!1;c("QPLUserFlow").endSuccess(i,{annotations:{"int":{result_count:h.currentResultCount}},instanceKey:h.instanceKey})}e={getCurrentInstanceKey:function(){return h.instanceKey},qplAddAnnotations:k,qplAddPoint:b,qplCancel:j,qplMarkFirstResultShowUp:c("emptyFunction"),qplStart:a,qplSuccess:d,updateCurrentResultCount:c("emptyFunction")};f=e;g["default"]=f}),98);
__d("MWContentSearchUtils",["fbt","I64","LSIntEnum","LSMessageSearchType","MAWVault","escapeRegExp","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=c("gkx")("1798");function l(a){return a.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function m(a,b){a=l(a).split(" ");var d=l(b),e=[],f=[];a.forEach(function(a){var b=new RegExp(c("escapeRegExp")(a),"gi");b=d.matchAll(b);b=Array.from(b);b=b.map(function(a){return a.index});var g=b.map(function(b){return a.length});f.push.apply(f,b);e.push.apply(e,g)});return{matchLengths:e.join(","),matchOffsets:f.join(",")}}function a(a,b,e,f){if(e!=null&&(b===1||(i||(i=d("I64"))).equal(f,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE)))){f=d("MAWVault").isVaulted(e)?d("MAWVault").unvault(e):e;e=m(a,f);return babelHelpers["extends"]({contextLine:f},e)}else return{contextLine:h._(/*BTDS*/"__JHASH__MOcENwPdyTO__JHASH__",[h._plural(b,"number")]).toString(),matchLengths:void 0,matchOffsets:void 0}}function b(a,b){return a===1&&b!=null?b:void 0}function e(a,b){return a===1&&b!=null?b:void 0}function f(a){return a!=null?(i||(i=d("I64"))).of_float(a):void 0}function n(a,b){a=(i||(i=d("I64"))).of_float(-a);return b==null?a:i.min(a,b)}function o(a,b){if(!k||a.messageTimestampMs==null||b.messageTimestampMs==null)if((i||(i=d("I64"))).gt(a.globalIndex,b.globalIndex))return 1;else if((i||(i=d("I64"))).lt(a.globalIndex,b.globalIndex))return-1;else return 0;else if((i||(i=d("I64"))).lt(a.messageTimestampMs,b.messageTimestampMs))return 1;else if((i||(i=d("I64"))).gt(a.messageTimestampMs,b.messageTimestampMs))return-1;else return 0}g.getContextLineAndMatches=a;g.getMessageOtid=b;g.getMessageId=e;g.getMessageTimestamp=f;g.getGlobalIndex=n;g.searchResultsCompareFn=o}),226);
__d("groupBy",[],(function(a,b,c,d,e,f){function a(a,b){return a.reduce(function(a,c){(a[b(c)]=a[b(c)]||[]).push(c);return a},{})}f["default"]=a}),66);
__d("MAWUniversalMessageSearch",["FBLogger","I64","JSResourceForInteraction","LSIntEnum","LSMessageSearchType","LSMessagingThreadTypeUtil","LSSearchRequestStatusType","MAWBridgeSearchMsg","MAWBridgeSendAndReceive","MAWFTSMergeCutoverSearchResults","MAWFTSUniversalSearchQPLLogger","MAWMsgType","MWContentSearchUtils","MWSearchThreadUtils","Promise","ReQL","WAJids","asyncToGeneratorRuntime","groupBy","promiseDone","waitForMiActMappingForUniversalSearch"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD),l=new Map(),m=c("JSResourceForInteraction")("MAWAsyncEBIssueBulkMessagesPointQuery").__setRef("MAWUniversalMessageSearch");function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){yield a.message_search_queries.put(babelHelpers["extends"]({hasNextPage:!1,query:b,threadKeyV2:(j||(j=d("I64"))).one,type_:k},c))});return o.apply(this,arguments)}function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(j||(j=d("I64"))).to_string(b.threadKey);b.matchCount!=null&&l.set(c,(j||(j=d("I64"))).to_float(b.matchCount));c=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.message_search_results).getKeyRange(k,b.query,b.threadKey)));if(c==null)yield a.message_search_results.put(babelHelpers["extends"]({},b));else{var e=d("MAWFTSMergeCutoverSearchResults").mergeCutoverSearchResults(c,b);yield a.message_search_results.upsert([k,c.query,c.threadKey,c.globalIndex],babelHelpers["extends"]({},e,{globalIndex:b.globalIndex}))}});return q.apply(this,arguments)}function a(a,b){var c;c=(c=l.get((j||(j=d("I64"))).to_string(a)))!=null?c:0;c+=b;l.set((j||(j=d("I64"))).to_string(a),c)}function e(){l.clear()}function r(a,b){return!d("LSMessagingThreadTypeUtil").isArmadilloSecure(b)?null:(b=l.get((j||(j=d("I64"))).to_string(a)))!=null?b:null}function s(a,b,c){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g){l.clear();yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield n(a,g,{resultCount:(j||(j=d("I64"))).zero,status:(i||(i=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").PENDING)})});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":144");c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"search_local_result_start"});var o=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{query:g,searchMode:d("MAWBridgeSearchMsg").MESSAGE_CONTENT_SEARCH}));o=o.map(function(a){if(a.recordType==="msg"){a.matchedTerms;a.recordType;a=babelHelpers.objectWithoutPropertiesLoose(a,["matchedTerms","recordType"]);return babelHelpers["extends"]({},a)}}).filter(Boolean);o=c("groupBy")(o,function(a){return a.chatJid});var q=Object.values(o);c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{"int":{numResult:q.length}},point:"search_local_result_end"});c("promiseDone")((h||(h=b("Promise"))).all(q.map(function(){var h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(h,i){var l=h[0].chatJid;yield c("waitForMiActMappingForUniversalSearch")(a,l);var n=(yield d("MWSearchThreadUtils").getThreadDataForSearchResult(a,l,e,k));if(n==null)return;var o=n.profilePicUrl,q=n.secondaryProfilePicUrl,r=n.threadDisplayName,s=n.threadKey;n=n.threadType;var t=h.sort(function(a,b){return b.sortOrderMs-a.sortOrderMs})[0],u=h.length===1&&t.msg==null?{id:t.externalId,sortOrderMs:t.sortOrderMs}:null,v={displayName:r,globalIndex:d("MWContentSearchUtils").getGlobalIndex(t.sortOrderMs),matchCount:(j||(j=d("I64"))).of_int32(h.length),profilePicUrl:o,query:g,secondaryProfilePicUrl:q,threadKey:s,threadType:n,type_:k};if(u==null)yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield p(a,babelHelpers["extends"]({},v,d("MWContentSearchUtils").getContextLineAndMatches(g,h.length,t==null?void 0:(a=t.msg)==null?void 0:a.content,k),{messageId:d("MWContentSearchUtils").getMessageId(h.length,t==null?void 0:(a=t.msg)==null?void 0:a.msgId),messageOtid:d("MWContentSearchUtils").getMessageOtid(h.length,t==null?void 0:t.externalId),messageTimestampMs:d("MWContentSearchUtils").getMessageTimestamp(t==null?void 0:t.sortOrderMs)}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":245");else{c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"fetch_missing_message_"+i+"_start"});r=(yield m.load().then(function(b){b=b.issueQueryAsPromiseForSearchResult;return b(a,d("WAJids").threadIdForChatJid(l),[u])}));if((r==null?void 0:r.messages.length)!==0){var w=r==null?void 0:r.messages[0];c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({point:"fetch_missing_message_"+i+"_end"});w!=null&&w.type===d("MAWMsgType").MSG_TYPE.TEXT&&(w==null?void 0:(o=w.msgContent)==null?void 0:o.content)!=null&&w.sortOrderMs!=null&&(yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield p(a,babelHelpers["extends"]({},v,d("MWContentSearchUtils").getContextLineAndMatches(g,h.length,t==null?void 0:(a=t.msg)==null?void 0:a.content,k),{messageOtid:w.externalId,messageTimestampMs:w.sortOrderMs!=null?(j||(j=d("I64"))).of_float(w.sortOrderMs):void 0}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":292"))}else c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{bool:{failedFetchingMissingMessage:!0}},point:"fetch_missing_message_"+i+"_end"})}});return function(a,b){return h.apply(this,arguments)}}())),function(){c("MAWFTSUniversalSearchQPLLogger").qplAddPoint({annotations:{"int":{numResult:q.length}},point:"issue_secure_search_query_end"}),c("promiseDone")(a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield n(a,g,{hasNextPage:!1,resultCount:(j||(j=d("I64"))).of_int32(q.length),status:(i||(i=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").COMPLETE)})});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":333"))},function(a){c("FBLogger")("maw_fts_search").mustfix("Error while searching in secure threads. Err: %s",a==null?void 0:a.message)})});return t.apply(this,arguments)}g.updateSecureMsgMatchCountForThread=a;g.clearSecureMsgMatchCountForThread=e;g.getSecureMsgsMatchCountForThread=r;g.search=s}),98);
__d("MDSInfiniteScrollList.react",["BaseInfiniteScrollList.react","MDSScrollableAreaStyles","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(8),e,f;b[0]!==a?(f=a.xstyle,e=babelHelpers.objectWithoutPropertiesLoose(a,["xstyle"]),b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);b[3]!==f?(a=[c("MDSScrollableAreaStyles").unthemed,f],b[3]=f,b[4]=a):a=b[4];b[5]!==e||b[6]!==a?(f=i.jsx(c("BaseInfiniteScrollList.react"),babelHelpers["extends"]({forceBrowserDefault:!0,xstyle:a},e)),b[5]=e,b[6]=a,b[7]=f):f=b[7];return f}g["default"]=a}),98);
__d("MWDialogTextPairing.react",["MWDialogContentTypeValues","MWXTextPairing.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=i.jsx(c("MWXTextPairing.react"),babelHelpers["extends"]({},a,{level:d("MWDialogContentTypeValues").textPairingLevel})),b[0]=a,b[1]=e):e=b[1];return e}g["default"]=a}),98);
__d("MWGroupMembershipListItem",["I64","MessagingSpecialThreadRole","MessagingSpecialThreadRoleBitOffset"],(function(a,b,c,d,e,f,g){"use strict";var h,i={BroadcastChannelParticipant:"broadcastChannelParticipantType",CommunityMember:"communityMemberType",ParticipantAndContact:"participantAndContactType",ServerSearchResult:"serverSearchResultType"};function a(a){if(a.type===i.ParticipantAndContact)return a.participant.isAdmin;if(a.type===i.CommunityMember)return a.communityMember.isAdmin;return a.type===i.BroadcastChannelParticipant?a.participant.isAdmin:!1}function b(a){if(a.type===i.ParticipantAndContact)return a.participant.isModerator;return a.type===i.CommunityMember?a.communityMember.isModerator:!1}function e(a){return a.type===i.CommunityMember?d("MessagingSpecialThreadRoleBitOffset").has(c("MessagingSpecialThreadRole").CHAT_HOST,a.communityMember):!1}function f(a){if(a.type===i.ParticipantAndContact)return a.contact.id;if(a.type===i.CommunityMember)return a.communityMember.contactId;return a.type===i.BroadcastChannelParticipant?a.participant.contactId:(h||(h=d("I64"))).of_string(a.serverSearchResult.resultId)}g.MWGroupMembershipMemberTypes=i;g.isAdmin=a;g.isModerator=b;g.isHost=e;g.contactId=f}),98);
__d("MWGroupMembershipListItemWrapper",["MWGroupMembershipListItem"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a.tag){case"ParticipantAndContact":return{contact:a.value[1],participant:a.value[0],type:d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ParticipantAndContact};case"CommunityMember":return{communityMember:a.value,type:d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.CommunityMember};case"ServerSearchResult":return{serverSearchResult:a.value,type:d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ServerSearchResult};case"BroadcastChannelParticipant":return{participant:a.value,type:d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.BroadcastChannelParticipant}}}g.tToRE=a}),98);
__d("MWInboxMessageSearchPanelHeader.react",["fbt","MWResponsiveLayoutConstants","MWResponsiveLayoutContext.react","MWXCircleButton.react","MWXIconCross","MWXRow.react","MWXRowItem.react","MWXText.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.useContext;function a(a){var b=d("react-compiler-runtime").c(13),e=a.onReturn;a=a.titleComponent;var f=k(c("MWResponsiveLayoutContext.react")),g;b[0]!==f||b[1]!==e?(g=function(){e(),f==null?void 0:f.popCard(d("MWResponsiveLayoutConstants").MWLayoutPanel.INFO_PANEL)},b[0]=f,b[1]=e,b[2]=g):g=b[2];g=g;var i;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(i=h._(/*BTDS*/"__JHASH__wSyF3E_Fmrl__JHASH__"),b[3]=i):i=b[3];b[4]!==g?(i=j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconCross"),label:i,onPress:g,size:32,type:"deemphasized"})}),b[4]=g,b[5]=i):i=b[5];b[6]!==a?(g=a!=null?a:j.jsx(c("MWXText.react"),{isSemanticHeading:!0,type:"bodyLink2",children:h._(/*BTDS*/"__JHASH__pNtZGTdyKvp__JHASH__")}),b[6]=a,b[7]=g):g=b[7];b[8]!==g?(a=j.jsx(c("MWXRowItem.react"),{expanding:!0,verticalAlign:"center",children:g}),b[8]=g,b[9]=a):a=b[9];b[10]!==i||b[11]!==a?(g=j.jsxs(c("MWXRow.react"),{paddingHorizontal:16,paddingTop:16,spacingHorizontal:8,children:[i,a]}),b[10]=i,b[11]=a,b[12]=g):g=b[12];return g}g["default"]=a}),226);
__d("isEBSearchEnabled",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("4801")}g["default"]=a}),98);
__d("MWInboxSecureContentSearch",["FBLogger","I64","JSResourceForInteraction","LSIntEnum","LSMessageSearchType","LSSearchRequestStatusType","MAWBridgeSearchMsg","MAWBridgeSendAndReceive","MAWChatJid","MAWFTSMergeCutoverSearchResults","MAWMiActOnActThreadReadyDeferred","MAWUniversalMessageSearch","MWContentSearchUtils","MWSearchThreadUtils","Promise","ReQL","WAJids","asyncToGeneratorRuntime","emptyFunction","groupBy","isEBSearchEnabled","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("JSResourceForInteraction")("MAWAsyncEBIssueBulkMessagesPointQuery").__setRef("MWInboxSecureContentSearch"),l=c("justknobx")._("2605");function a(a,c,e){return(j||(j=b("Promise"))).all([d("ReQL").mergeJoin(d("ReQL").fromTableAscending(e.tables.participants,[]).getKeyRange(a),d("ReQL").fromTableAscending(e.tables.contacts)),d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.threads).getKeyRange(a))]).then(function(a){var b=a[0];a[1];a=b.filter(function(a){a[0];a=a[1];a=(h||(h=d("I64"))).equal(a.id,c);return!a}).map(function(a){a[0];a=a[1];return a});return d("ReQL").firstAsync(a)})}function m(a,c){return d("MAWChatJid").toThreadKeyMaybe(c,a.chatJid).then(function(e){return e==null?(j||(j=b("Promise"))).resolve([null,a]):(j||(j=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(c.threads).getKeyRange(e)),j.resolve(a)])})}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange((h||(h=d("I64"))).of_string(b))));return a});return o.apply(this,arguments)}function p(a,b){var e=b.query;b=b.threadKey;return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.message_search_results).getKeyRange((i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD),e,b))}function q(a,e,g,k,l,o,q,r){r===void 0&&(r=c("LSSearchRequestStatusType").COMPLETE);var s=function(f){return m(a,f).then(function(a){var m=a[0];if(m==null)return;var q=a[1],s=q.msg;if(s==null)return;if(q!=null)return(j||(j=b("Promise"))).all([d("MWSearchThreadUtils").getThreadPics(m,l,o),d("MWSearchThreadUtils").getThreadParticipants(m,o),(h||(h=d("I64"))).equal(k,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE))?n(o,s.sender):(j||(j=b("Promise"))).resolve(null),(h||(h=d("I64"))).equal(k,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD))?p(f,{query:g,threadKey:m.threadKey}):(j||(j=b("Promise"))).resolve(null)]).then(function(a){var n=a[0],o=n[0];n=n[1];var p=a[1],t=a[2];a=a[3];(h||(h=d("I64"))).equal(k,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD))&&d("MAWUniversalMessageSearch").updateSecureMsgMatchCountForThread(m.threadKey,e);p=babelHelpers["extends"]({},d("MWContentSearchUtils").getContextLineAndMatches(g,e,s.content,k),{displayName:d("MWSearchThreadUtils").getThreadDisplayName(l,m,p,t,k),globalIndex:(h||(h=d("I64"))).of_float(-q.sortOrderMs),matchCount:h.of_int32(e),messageId:s.msgId,messageOtid:q.externalId,messageTimestampMs:(h||(h=d("I64"))).equal(k,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD))&&e>1?void 0:(h||(h=d("I64"))).of_string(""+q.sortOrderMs),profilePicUrl:(h||(h=d("I64"))).equal(k,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE))&&t!=null?t.profilePictureUrl:o,query:g,secondaryProfilePicUrl:(h||(h=d("I64"))).equal(k,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE))&&t!=null?t.profilePictureFallbackUrl:n,threadKey:m.threadKey,threadType:m.threadType,type_:k});if((h||(h=d("I64"))).equal(k,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD))||a==null)o=f.message_search_results.put(p);else{t=d("MAWFTSMergeCutoverSearchResults").mergeCutoverSearchResults(a,p);o=f.message_search_results.upsert([k,a.query,a.threadKey,a.globalIndex],babelHelpers["extends"]({},t,{globalIndex:p.globalIndex}))}return(j||(j=b("Promise"))).all([f.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:g,resultCount:h.of_int32(e),status:(i||(i=d("LSIntEnum"))).ofNumber(r),threadKeyV2:m.threadKey,type_:k}),o]).then(c("emptyFunction"))})})};return q!=null?s(q):o.runInTransaction(function(a){return s(a)},"readwrite",void 0,void 0,f.id+":294")}function r(a,b,c,d){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){f!=null&&f.flow.qplAddPoint({instanceKey:f.instanceKey,point:"search_local_result_start"});c=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","search",{query:c,searchMode:d("MAWBridgeSearchMsg").MESSAGE_CONTENT_SEARCH}));return(j||(j=b("Promise"))).all(c.map(function(b){if(b.recordType==="msg"){b.matchedTerms;b.recordType;var c=babelHelpers.objectWithoutPropertiesLoose(b,["matchedTerms","recordType"]);return d("MAWChatJid").toThreadKeyMaybe(a.tables,c.chatJid).then(function(a){return[c,a]})}}).filter(Boolean)).then(function(a){a=e!=null?a.filter(function(a){a[0];a=a[1];return a!=null&&(h||(h=d("I64"))).equal(a,e)}):a.filter(function(a){a[0];a=a[1];return a!=null});var b=null;e!=null&&(b={"int":{numResult:a.length}});f!=null&&f.flow.qplAddPoint({annotations:babelHelpers["extends"]({},b),instanceKey:f.instanceKey,point:"search_local_result_end"});return a})});return s.apply(this,arguments)}function e(a,e,f,g){d("MAWUniversalMessageSearch").clearSecureMsgMatchCountForThread();return r(f,a,void 0,g).then(function(k){k=Object.values(c("groupBy")(k,function(a){a[0];a=a[1];return a==null?"":(h||(h=d("I64"))).to_string(a)}));g!=null&&g.flow.qplAddAnnotations({annotations:{"int":{numResult:k.length}}});return k.map(function(b){var g=b[0];if(g!==null){g=g[0];return q(g,b.length,a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD),e,f)}}).reduce(function(a,d){return(j||(j=b("Promise"))).all([a,d]).then(c("emptyFunction"))},(j||(j=b("Promise"))).resolve())})}function t(a,b){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(d("WAJids").isAuthorSystem(b))return null;if(d("WAJids").isAuthorMe(b)){a=(yield d("ReQL").firstExnAsync(d("ReQL").fromTableAscending(a.tables._user_info).map(function(a){return a.facebookUserId})));return(h||(h=d("I64"))).to_string(a)}return d("WAJids").userIdFromJid(b)});return u.apply(this,arguments)}function v(a,e,f,g,h,k){return(j||(j=b("Promise"))).all(g.map(function(b){return q(b,h,f,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE),k,a,e)})).then(c("emptyFunction"))}function w(a,e,f,g,h,k){return(j||(j=b("Promise"))).all(g.map(function(g){var l=g.author,m=g.externalId,n=g.msgContent,o=g.sortOrderMs,p=g.ts;return(n==null?void 0:n.content)==null||o==null?(j||(j=b("Promise"))).resolve():t(a,l).then(function(g){if(g==null){c("FBLogger")("maw_message_search").mustfix("Contact ID is not a FBID %s",l);return(j||(j=b("Promise"))).resolve()}g={chatJid:f,externalId:m,msg:{content:n.content,sender:g,ts:p},sortOrderMs:o};return q(g,h,e,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE),k,a)})})).then(c("emptyFunction"))}function x(a,e,g,m,n){return m.runInTransaction(function(b){return b.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:a,resultCount:(h||(h=d("I64"))).of_int32(0),status:(i||(i=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").PENDING),threadKeyV2:e,type_:i.ofNumber(c("LSMessageSearchType").MESSAGE)})},"readwrite",void 0,void 0,f.id+":514").then(function(b){return r(m,a,e,n)}).then(function(o){var p=o.length,r=o.filter(function(a){var b=a[0];a[1];return b.msg!=null}).length,s=r,t=function(){var f=o.map(function(a){a=a[0];return a}).filter(function(a){return a.msg==null});if(f.length===0)return(j||(j=b("Promise"))).resolve();f=f.slice(0,l);n.flow.qplAddPoint({annotations:{"int":{numRequestedMessages:f.length}},instanceKey:n.instanceKey,point:"fetch_missing_messages_start"});return c("MAWMiActOnActThreadReadyDeferred")(m,e,"MWInboxMessageSearchInput.react",function(c,e){var h=f.map(function(a){return{id:a.externalId,sortOrderMs:a.sortOrderMs}}),i=d("WAJids").threadIdForChatJid(e);return k.load().then(function(c){var d=c.issueQueryAsPromiseForSearchResult;c=d(m,i,h);return c==null?(j||(j=b("Promise"))).resolve():c.then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=b.messages;var c=b;if(b.length!==h.length){n.flow.qplAddPoint({annotations:{"int":{numRemainingMessages:h.length-b.length}},instanceKey:n.instanceKey,point:"fetch_missing_messages_partial"});var f=h.filter(function(a){return!c.some(function(b){return b.externalId===a.id})});if(f.length>0){f=(yield d(m,i,f));f!=null&&(c=[].concat(b,f.messages))}}s=r+c.length;n.flow.qplAddPoint({annotations:{"int":{numRespondedMessages:c.length}},instanceKey:n.instanceKey,point:"fetch_missing_messages_end"});return w(m,a,e,c,s,g)});return function(a){return c.apply(this,arguments)}}())})})};return(j||(j=b("Promise"))).all([o.map(function(b){b=b[0];return q(b,p,a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE),g,m,void 0,c("LSSearchRequestStatusType").PENDING)}).reduce(function(a,d){return(j||(j=b("Promise"))).all([a,d]).then(c("emptyFunction"))},j.resolve()),c("isEBSearchEnabled")()?t():(j||(j=b("Promise"))).resolve()]).then(function(b){return m.runInTransaction(function(b){return b.message_search_queries.put({hasNextPage:void 0,nextPageCursor:void 0,query:a,resultCount:(h||(h=d("I64"))).of_int32(s),status:(i||(i=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").COMPLETE),threadKeyV2:e,type_:i.ofNumber(c("LSMessageSearchType").MESSAGE)})},"readwrite",void 0,void 0,f.id+":670")}).then(function(a){return(j||(j=b("Promise"))).resolve()})})}g.getThreadOtherParticipantContact=a;g.searchSecureDatabaseThreads=e;g.addBridgeSearchMsgsToSearchResult=v;g.addMessagesToSearchResult=w;g.searchSecureDatabaseMessages=x}),98);
__d("MWLSGroupMembershipMemberCellProfilePhoto.react",["fbt","IntlVariations","MWXProfilePhoto.react","MWXTooltip.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(15),e=a.linkProps,f=a.name,g=a.onPress,i=a.profilePictureUrl;a=a.showTooltip;var k;b[0]!==f?(k=h._(/*BTDS*/"__JHASH__5FWHZ8StuMQ__JHASH__",[h._name("name",f,c("IntlVariations").GENDER_UNKNOWN)]),b[0]=f,b[1]=k):k=b[1];var l;b[2]!==i?(l={uri:i},b[2]=i,b[3]=l):l=b[3];b[4]!==e||b[5]!==f||b[6]!==g||b[7]!==k||b[8]!==l?(i=j.jsx(c("MWXProfilePhoto.react"),{alt:f,"aria-label":k,linkProps:e,onPress:g,shape:"circle",size:36,source:l}),b[4]=e,b[5]=f,b[6]=g,b[7]=k,b[8]=l,b[9]=i):i=b[9];e=i;if(a){b[10]!==f?(g=h._(/*BTDS*/"__JHASH__gvt-u-jxLjT__JHASH__",[h._name("name",f,c("IntlVariations").GENDER_UNKNOWN)]),b[10]=f,b[11]=g):g=b[11];b[12]!==e||b[13]!==g?(k=j.jsx(c("MWXTooltip.react"),{position:"above",tooltip:g,children:e}),b[12]=e,b[13]=g,b[14]=k):k=b[14];return k}return e}g["default"]=a}),226);
__d("useMWLSGroupMembershipMenuQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="24535998679380437"}),null);
__d("useMWLSGroupMembershipMenuQuery$Parameters",["useMWLSGroupMembershipMenuQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("useMWLSGroupMembershipMenuQuery_facebookRelayOperation"),metadata:{},name:"useMWLSGroupMembershipMenuQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWLSGroupMembershipMenu.entrypoint",["JSResourceForInteraction","useMWLSGroupMembershipMenuQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){var b=a.groupID;a=a.userID;return{queries:{groupMembershipMenuQueryRef:{parameters:c("useMWLSGroupMembershipMenuQuery$Parameters"),variables:{groupID:b,userID:a}}}}},root:c("JSResourceForInteraction")("MWLSGroupMembershipMenu.react").__setRef("MWLSGroupMembershipMenu.entrypoint")};g["default"]=a}),98);
__d("useMWNavigateToThreadFromGroupMembership",["FBLogger","LSIntEnum","MAWVerifyThreadCutover","MWPBumpEntityKey","Promise","ReQL","asyncToGeneratorRuntime","cr:874","gkx","promiseDone","react-compiler-runtime","useMWNavigation","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){if(f)return!0;if(c("gkx")("8556")){f=(yield d("MAWVerifyThreadCutover").verifyContactCutoverOrDefaultE2EEWhenReady((j||(j=b("Promise"))).resolve(a),e));return f!=null}f=(yield d("MAWVerifyThreadCutover").verifyThreadCutover((j||(j=b("Promise"))).resolve(a),e));return f});return l.apply(this,arguments)}function a(){var a=d("react-compiler-runtime").c(4),e=(i||(i=c("useReStore")))(),f=c("useMWNavigation")(),g=b("cr:874")(),j;a[0]!==g||a[1]!==e||a[2]!==f?(j=function(a,b){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","chat_members_overflow_message"),c("promiseDone")(k(e,a,b),function(b){if(b)c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.contacts).getKeyRange(a)).then(function(a){if(a!=null&&g!=null)return g([a],[]);else{c("FBLogger")("Unable to fetch contact","maw_threads");return}}));else return f.openInbox({clientThreadKey:void 0,threadKey:a,threadType:(h||(h=d("LSIntEnum"))).ofNumber(1)},"groupMembers")})},a[0]=g,a[1]=e,a[2]=f,a[3]=j):j=a[3];return j}g["default"]=a}),98);
__d("MWLSGroupMembershipMemberCell.react",["fbt","AddOnEndOverride.react","BaseMiddotSeparator.react","GenderConst","I64","Int64Hooks","LSContactBlockedByViewerStatus","LSContactGenderToGenderConst","LSFactory","LSGroupParticipantJoinState","LSIntEnum","LSIssueCommunityAdminModerationActionsFetchStoredProcedure","LSThreadBitOffset","LSWhatsAppConnectStatus","MWCMThreadTypes.react","MWGroupMembershipListItem","MWLSContactTypeExactUtils","MWLSGroupMembershipMemberCellProfilePhoto.react","MWLSGroupMembershipMenu.entrypoint","MWPActor.react","MWXCircleButton.react","MWXEntryPointPopoverTrigger.react","MWXIconDots3Horizontal","MWXListCell.react","MWXPressable.react","MWXText.react","MWXTextPairing.react","MWXTooltip.react","getFBTSafeGenderFromGenderConst","getLSMediaContactProfilePictureUrl","gkx","pageID","promiseDone","react","react-compiler-runtime","useMWNavigateToThreadFromGroupMembership","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=j||(j=d("react"));j.useMemo;var n=h._(/*BTDS*/"__JHASH__3WTOYPxVm2l__JHASH__"),o=h._(/*BTDS*/"__JHASH__J1b76x4xKfs__JHASH__"),p=h._(/*BTDS*/"__JHASH__d3jtAkHct5c__JHASH__"),q="member_list_profile_sheet_source_"+c("pageID");function r(a,b){var e=d("react-compiler-runtime").c(6);bb0:{if(a.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ServerSearchResult&&a.serverSearchResult.contextLine!==""){var f;e[0]!==a.serverSearchResult.contextLine?(f=[m.jsx(m.Fragment,{children:a.serverSearchResult.contextLine})],e[0]=a.serverSearchResult.contextLine,e[1]=f):f=e[1];a=f;break bb0}e[2]!==b?(f=b.filter(s),e[2]=b,e[3]=f):f=e[3];b=f;if(b.length>0){e[4]!==b?(f=m.jsx(c("BaseMiddotSeparator.react"),{children:b}),e[4]=b,e[5]=f):f=e[5];a=f;break bb0}a=null}return a}function s(a){return a!=null}function t(a){if(a.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ParticipantAndContact){var b=a.contact,e=a.participant,f=b.blockedByViewerStatus,g=b.contactTypeExact,h=b.gender,i=b.name,j=b.secondaryName,m=b.waConnectStatus,n=e.groupParticipantJoinState,o=e.isSuperAdmin;e=e.subscribeSource;return{gender:c("LSContactGenderToGenderConst")(h),isBlocked:!(k||(k=d("I64"))).equal(f,(l||(l=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED)),isInvitedByViewer:k.equal(n,l.ofNumber(c("LSGroupParticipantJoinState").INVITED)),isSuperAdmin:o===!0,name:i,nonWaAddressable:k.equal(m,l.ofNumber(c("LSWhatsAppConnectStatus").WHATSAPP_NOT_ADDRESSABLE)),profilePictureUrl:c("getLSMediaContactProfilePictureUrl")(b),secondaryName:j!=null&&d("MWLSContactTypeExactUtils").isIgContact(g)?j:null,subscribeSource:(h=e)!=null?h:null,username:b.username}}if(a.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.CommunityMember){f=a.communityMember;n=f.isBlocked;o=f.name;i=f.nickname;m=f.profilePictureUrl;g=f.subtitle;return{gender:c("GenderConst").NOT_A_PERSON,isBlocked:(j=n)!=null?j:!1,isInvitedByViewer:!1,isSuperAdmin:!1,name:(e=i)!=null?e:o,nonWaAddressable:!1,profilePictureUrl:(h=m)!=null?h:"<PLACEHOLDER>",secondaryName:i!=null?o:null,subscribeSource:null,subtitle:g}}if(a.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.BroadcastChannelParticipant){b=a.participant;f=b.isBlocked;n=b.name;j=b.nickname;e=b.profilePictureUrl;m=b.profilePictureUrlFallback;return{gender:c("GenderConst").NOT_A_PERSON,isBlocked:(h=f)!=null?h:!1,isInvitedByViewer:!1,isSuperAdmin:!1,name:(i=j)!=null?i:n,nonWaAddressable:!1,profilePictureUrl:(g=(o=e)!=null?o:m)!=null?g:"<PLACEHOLDER>",secondaryName:null,subscribeSource:null}}b=a.serverSearchResult;f=b.displayName;h=b.profilePicUrl;return{gender:c("GenderConst").NOT_A_PERSON,isBlocked:!(k||(k=d("I64"))).equal(b.blockedByViewerStatus,(l||(l=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED)),isInvitedByViewer:!1,isSuperAdmin:!1,name:f,nonWaAddressable:!1,profilePictureUrl:(j=h)!=null?j:"<PLACEHOLDER>",secondaryName:null,subscribeSource:null}}function u(a,b,c,e,f,g,i){var j,k,l;j=(j=d("MWGroupMembershipListItem").isAdmin(a))!=null?j:!1;k=(k=d("MWGroupMembershipListItem").isModerator(a))!=null?k:!1;l=(l=d("MWGroupMembershipListItem").isHost(a))!=null?l:!1;a=t(a);var m=a.isInvitedByViewer,q=a.isSuperAdmin,r=a.nonWaAddressable,s=a.subscribeSource;a=a.subtitle;if(b&&r&&!m)return h._(/*BTDS*/"__JHASH__YJ7dDY2F-1___JHASH__").toString();if(b&&!r&&m)return h._(/*BTDS*/"__JHASH__XW-fqo6HqSP__JHASH__").toString();if(s!=null&&q)return c?n:s;if(j&&e)return n;if(k&&g)return o;if(l&&f)return p;return c&&i&&a!=null?a:null}function a(a){var b=d("react-compiler-runtime").c(67),e=a.canMessageUser,g=a.folder,j=a.isMAWParticipantSuperAdmin,n=a.isSecure,o=a.membershipListItem,p=a.onClose,s=a.showAdminIndicator,v=a.showHostIndicator,w=a.showInvitedByViewerOnly,x=a.showModeratorIndicator,y=a.thread;a=v===void 0?!1:v;v=w===void 0?!1:w;var z=(i||(i=c("useReStore")))();w=d("MWPActor.react").useActor();var A;b[0]!==o?(A=d("MWGroupMembershipListItem").contactId(o),b[0]=o,b[1]=A):A=b[1];var B=A;A=d("LSThreadBitOffset").has(66,y)&&d("MWCMThreadTypes.react").isStandardCMThread(y.threadType);var C=c("gkx")("23433")&&c("gkx")("538"),D=c("gkx")("6992"),E=c("useMWNavigateToThreadFromGroupMembership")(),F;b[2]!==o?(F=t(o),b[2]=o,b[3]=F):F=b[3];F=F;var G=F.gender,H=F.isBlocked,I=F.isInvitedByViewer,J=F.isSuperAdmin,K=F.name,L=F.profilePictureUrl,M=F.secondaryName,N=F.subscribeSource;F=F.username;var O=d("MWCMThreadTypes.react").isJoinedCMThread(y.threadType),P,Q;b[4]!==B||b[5]!==z||b[6]!==g||b[7]!==y.threadKey?(P=function(){g!=null&&c("promiseDone")(z.runInTransaction(function(a){return c("LSIssueCommunityAdminModerationActionsFetchStoredProcedure")(c("LSFactory")(a),{fbGroupId:g==null?void 0:g.folderId,requestId:q,source:(l||(l=d("LSIntEnum"))).ofNumber(14),targetUserId:B,threadId:y.threadKey})},"readwrite",void 0,void 0,f.id+":329"))},Q=[B,z,g,y.threadKey],b[4]=B,b[5]=z,b[6]=g,b[7]=y.threadKey,b[8]=P,b[9]=Q):(P=b[8],Q=b[9]);var R=d("Int64Hooks").useCallbackInt64(P,Q);b[10]!==H?(P=H?h._(/*BTDS*/"__JHASH__iywW1hlnypb__JHASH__"):null,b[10]=H,b[11]=P):P=b[11];Q=u(o,n,O,s,a,x,A);H=N!=null&&!J&&!O?N:null;s=C&&(F==null?void 0:F.length)?(D?"@":"")+F:null;b[12]!==M||b[13]!==s||b[14]!==P||b[15]!==Q||b[16]!==H?(a=[P,M,Q,H,s],b[12]=M,b[13]=s,b[14]=P,b[15]=Q,b[16]=H,b[17]=a):a=b[17];x=r(o,a);A=n&&I&&!v;b[18]!==B||b[19]!==n||b[20]!==E||b[21]!==p?(J=function(){E(B,n),p()},b[18]=B,b[19]=n,b[20]=E,b[21]=p,b[22]=J):J=b[22];O=J;if(b[23]!==(g==null?void 0:g.fbGroupId)){C=(k||(k=d("I64"))).to_string((N=g==null?void 0:g.fbGroupId)!=null?N:(k||(k=d("I64"))).zero);b[23]=g==null?void 0:g.fbGroupId;b[24]=C}else C=b[24];b[25]!==w?(D=(k||(k=d("I64"))).to_string(w),b[25]=w,b[26]=D):D=b[26];b[27]!==C||b[28]!==D?(F={groupID:C,userID:D},b[27]=C,b[28]=D,b[29]=F):F=b[29];b[30]!==g||b[31]!==j||b[32]!==o||b[33]!==p||b[34]!==y?(M={folder:g,isMAWParticipantSuperAdmin:j,membershipListItem:o,onCloseDialog:p,thread:y},b[30]=g,b[31]=j,b[32]=o,b[33]=p,b[34]=y,b[35]=M):M=b[35];b[36]!==B||b[37]!==R||b[38]!==G||b[39]!==K?(s=function(a,b,d,e,f,g,i){return m.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:h._(/*BTDS*/"__JHASH__I91w8MVMuJd__JHASH__"),children:m.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconDots3Horizontal"),label:h._(/*BTDS*/"__JHASH__-R08aUV4n3s__JHASH__",[h._name("name",K,c("getFBTSafeGenderFromGenderConst")(G))]),onHoverIn:function(a){R(),e==null?void 0:e(a)},onHoverOut:function(){f==null?void 0:f()},onPress:function(){return b()},onPressIn:g,ref:a,size:36,testid:void 0,type:"deemphasized"})})},b[36]=B,b[37]=R,b[38]=G,b[39]=K,b[40]=s):s=b[40];b[41]!==F||b[42]!==M||b[43]!==s?(P=m.jsx(c("AddOnEndOverride.react"),{children:m.jsx(c("MWXEntryPointPopoverTrigger.react"),{align:"end",entryPointParams:F,otherProps:M,popoverEntryPoint:c("MWLSGroupMembershipMenu.entrypoint"),popoverType:"menu",preloadTrigger:"button",children:s})}),b[41]=F,b[42]=M,b[43]=s,b[44]=P):P=b[44];b[45]!==e||b[46]!==K||b[47]!==O||b[48]!==L?(Q=m.jsx(c("MWLSGroupMembershipMemberCellProfilePhoto.react"),{name:K,onPress:O,profilePictureUrl:L,showTooltip:e}),b[45]=e,b[46]=K,b[47]=O,b[48]=L,b[49]=Q):Q=b[49];b[50]!==x||b[51]!==B||b[52]!==n||b[53]!==K||b[54]!==O||b[55]!==E||b[56]!==p||b[57]!==A?(H=x!=null?m.jsx(c("MWXTextPairing.react"),{body:m.jsx(c("MWXText.react"),{color:A?"disabled":"secondary",type:"body4",children:x}),headline:m.jsx(c("MWXPressable.react"),{onPress:function(){E(B,n),p()},overlayDisabled:!0,children:m.jsx(c("MWXText.react"),{color:A?"disabled":"primary",type:"headline4",children:K})}),level:4}):m.jsx(c("MWXTextPairing.react"),{body:m.jsx(c("MWXPressable.react"),{onPress:O,overlayDisabled:!0,children:m.jsx(c("MWXText.react"),{align:"start",numberOfLines:1,type:"headline4",children:K})}),level:4}),b[50]=x,b[51]=B,b[52]=n,b[53]=K,b[54]=O,b[55]=E,b[56]=p,b[57]=A,b[58]=H):H=b[58];b[59]!==B?(a=(k||(k=d("I64"))).to_string(B),b[59]=B,b[60]=a):a=b[60];I="mw_participant_cell_"+(k||(k=d("I64"))).to_string(B);b[61]!==P||b[62]!==Q||b[63]!==H||b[64]!==a||b[65]!==I?(v=m.jsx(c("MWXListCell.react"),{addOnEnd:P,addOnEndVerticalAlign:"center",addOnStart:Q,content:H,size:"medium",testid:void 0},a),b[61]=P,b[62]=Q,b[63]=H,b[64]=a,b[65]=I,b[66]=v):v=b[66];return v}g["default"]=a}),226);
__d("useMAWGetGroupSuperAdmin",["Int64Hooks","MAWMiActOnActThreadReadyDeferred","cr:9779","promiseDone","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,f){var g=d("react-compiler-runtime").c(6),i=(h||(h=c("useReStore")))(),j,k;g[0]!==i||g[1]!==e||g[2]!==f||g[3]!==a?(j=function(){if(b("cr:9779")!=null&&e){var d=b("cr:9779").sendAndReceive;c("promiseDone")(c("MAWMiActOnActThreadReadyDeferred")(i,a,"useMAWGetGroupSuperAdmin",function(a,b){return d("backend","getGroupSuperAdmin",{chatJid:b}).then(function(a){return f(a)})}))}},k=[i,e,f,a],g[0]=i,g[1]=e,g[2]=f,g[3]=a,g[4]=j,g[5]=k):(j=g[4],k=g[5]);d("Int64Hooks").useEffectInt64(j,k)}g["default"]=a}),98);
__d("MWLSGroupMembershipMemberList.react",["fbt","I64","LSGroupParticipantJoinState","LSIntEnum","LSMessagingThreadTypeUtil","MDSInfiniteScrollList.react","MWDialogTextPairing.react","MWGroupMembershipListItem","MWLSGroupMembershipMemberCell.react","MWMemberListGlimmer.react","MWPActor.react","emptyFunction","react","react-compiler-runtime","react-strict-dom","useMAWGetGroupSuperAdmin"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react"));b=i;b.useCallback;var m=b.useState,n={noHosts:{alignItems:"x6s0dn4",alignSelf:"xamitd3",display:"x78zum5",flexGrow:"x1iyjqo2",height:"x1egiwwb",justifyContent:"xl56j7k",width:"xdzyupr",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(28),e=a.disableScroll,f=a.doSortParticipants,g=a.folder,i=a.hasMore,k=a.isLoading,s=a.onClose,t=a.onLoadMore,u=a.participantsAndContacts,v=a.showAdmodIndicator,w=a.showAdmodsOnly,x=a.showHostsOnly,y=a.showInvitedByViewerOnly,z=a.thread;a=e===void 0?!1:e;e=f===void 0?!0:f;f=i===void 0?!1:i;i=k===void 0?!1:k;var A=s===void 0?c("emptyFunction"):s;k=t===void 0?c("emptyFunction"):t;s=m(c("emptyFunction"));var B=s[0];t=s[1];b[0]===Symbol["for"]("react.memo_cache_sentinel")?(s=d("MWPActor.react").isAPPlus(),b[0]=s):s=b[0];var C=s;b[1]!==u||b[2]!==w||b[3]!==x||b[4]!==y?(s=w?u.filter(r):y?u.filter(q):x?u.filter(p):u,b[1]=u,b[2]=w,b[3]=x,b[4]=y,b[5]=s):s=b[5];u=s;b[6]!==e||b[7]!==u?(w=e?u.slice(0).sort(o):u,b[6]=e,b[7]=u,b[8]=w):w=b[8];s=w;b[9]!==z.threadType?(e=d("LSMessagingThreadTypeUtil").isArmadilloSecure(z.threadType),b[9]=z.threadType,b[10]=e):e=b[10];var D=e;c("useMAWGetGroupSuperAdmin")(z.threadKey,D,t);b[11]!==g||b[12]!==D||b[13]!==A||b[14]!==v||b[15]!==y||b[16]!==B||b[17]!==z?(u=function(a){var b=d("MWGroupMembershipListItem").contactId(a);return l.jsx(c("MWLSGroupMembershipMemberCell.react"),{canMessageUser:!C,folder:g,isMAWParticipantSuperAdmin:D&&B!=null?B===(j||(j=d("I64"))).to_string(b):!1,isSecure:D,membershipListItem:a,onClose:A,showAdminIndicator:v,showHostIndicator:v,showInvitedByViewerOnly:y,showModeratorIndicator:v,thread:z},(j||(j=d("I64"))).to_string(b))},b[11]=g,b[12]=D,b[13]=A,b[14]=v,b[15]=y,b[16]=B,b[17]=z,b[18]=u):u=b[18];w=u;if(s.length===0&&x&&i===!1&&f===!1){b[19]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._(/*BTDS*/"__JHASH__M-jFobtfz3M__JHASH__"),b[19]=e):e=b[19];b[20]===Symbol["for"]("react.memo_cache_sentinel")?(t=l.jsx(d("react-strict-dom").html.div,{style:n.noHosts,children:l.jsx(c("MWDialogTextPairing.react"),{body:e,bodyColor:"secondary",headline:h._(/*BTDS*/"__JHASH__7DQH5InZyqq__JHASH__"),textAlign:"center"})}),b[20]=t):t=b[20];return t}b[21]!==a||b[22]!==f||b[23]!==i||b[24]!==k||b[25]!==w||b[26]!==s?(u=a?s.map(w):l.jsx(c("MDSInfiniteScrollList.react"),{hasMore:f,isLoading:i,items:s,loadingIndicator:l.jsx(c("MWMemberListGlimmer.react"),{}),onLoadMore:k,renderItem:w}),b[21]=a,b[22]=f,b[23]=i,b[24]=k,b[25]=w,b[26]=s,b[27]=u):u=b[27];return u}function o(a,b){if(a.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ParticipantAndContact&&b.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ParticipantAndContact)return a.contact.name.localeCompare(b.contact.name);if(a.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.CommunityMember&&b.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.CommunityMember)return a.communityMember.name.localeCompare(b.communityMember.name);return a.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ServerSearchResult&&b.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ServerSearchResult?a.serverSearchResult.displayName.localeCompare(b.serverSearchResult.displayName):0}function p(a){return(a=d("MWGroupMembershipListItem").isHost(a))!=null?a:!1}function q(a){a=a.type===d("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ParticipantAndContact?a.participant.groupParticipantJoinState:(k||(k=d("LSIntEnum"))).ofNumber(c("LSGroupParticipantJoinState").MEMBER);return(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSGroupParticipantJoinState").INVITED))}function r(a){var b;b=(b=d("MWGroupMembershipListItem").isAdmin(a))!=null?b:!1;a=(a=d("MWGroupMembershipListItem").isModerator(a))!=null?a:!1;return b||a}g["default"]=a}),226);
__d("MWMessageSearchMessageSnippet.react",["MWXMessageTextWithEntities.react","MWXTextImpl.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=function(a){return i.jsx(c("MWXTextImpl.react"),{color:"primary",type:"bodyLink4",children:a})};function a(a){var b=d("react-compiler-runtime").c(19);a=a.item;var e;if(b[0]!==a.contextLine||b[1]!==a.matchLengths||b[2]!==a.matchOffsets){var f,g;f=(f=(f=a.matchOffsets)==null?void 0:f.split(","))!=null?f:[];if(b[6]!==a.matchLengths){var h;h=(h=(h=a.matchLengths)==null?void 0:h.split(","))!=null?h:[];b[6]=a.matchLengths;b[7]=h}else h=b[7];var k=h;h=Number(f[0]);g=(g=(g=a.contextLine)==null?void 0:g.length)!=null?g:0;g=h+15>g;g=g?30:15;var l=Math.max(0,h-g);e=l>0;if(b[8]!==a.contextLine||b[9]!==l){h=(g=(h=a.contextLine)==null?void 0:h.slice(l,a.contextLine.length))!=null?g:"";b[8]=a.contextLine;b[9]=l;b[10]=h}else h=b[10];g=h;b[11]!==k||b[12]!==e||b[13]!==l?(h=function(a,b){return{entity:{__typename:"Bold"},length:Number(k[b]),offset:Number(a)-l+(e?3:0)}},b[11]=k,b[12]=e,b[13]=l,b[14]=h):h=b[14];f=f.map(h);b[0]=a.contextLine;b[1]=a.matchLengths;b[2]=a.matchOffsets;b[3]=e;b[4]=f;b[5]=g}else e=b[3],f=b[4],g=b[5];h=f;b[15]===Symbol["for"]("react.memo_cache_sentinel")?(a={Bold:[j]},b[15]=a):a=b[15];f=e?"..."+g:g;b[16]!==h||b[17]!==f?(g=i.jsx(c("MWXMessageTextWithEntities.react"),{ranges:h,renderers:a,text:f}),b[16]=h,b[17]=f,b[18]=g):g=b[18];return g}g["default"]=a}),98);
__d("MWParticipantsForBroadcastChannelUtils",["Int64Hooks","LSClearDiscoverableChatsParticipantsAndRangesStoredProcedure","LSFactory","LSFetchDiscoverableChatParticipantsStoredProcedure","LSIntEnum","LSMessagingThreadTypeUtil","ReQL","ReQLSuspense","promiseDone","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;(j||d("react")).useCallback;function a(a,b){var e=d("react-compiler-runtime").c(6),g=(h||(h=c("useReStore")))(),j,k;e[0]!==g||e[1]!==b||e[2]!==a.threadKey||e[3]!==a.threadType?(j=function(){d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)&&c("promiseDone")(g.runInTransaction(function(e){return c("LSFetchDiscoverableChatParticipantsStoredProcedure")(c("LSFactory")(e),{cursor:"",maxName:"",source:(i||(i=d("LSIntEnum"))).ofNumber(b),threadKey:a.threadKey})},"readwrite",void 0,void 0,f.id+":39"))},k=[g,b,a.threadKey,a.threadType],e[0]=g,e[1]=b,e[2]=a.threadKey,e[3]=a.threadType,e[4]=j,e[5]=k):(j=e[4],k=e[5]);d("Int64Hooks").useEffectInt64(j,k)}function b(){var a=d("react-compiler-runtime").c(2),b=(h||(h=c("useReStore")))(),e;a[0]!==b?(e=function(){return b.runInTransaction(k,"readwrite",void 0,void 0,f.id+":59")},a[0]=b,a[1]=e):e=a[1];return e}function k(a){return c("LSClearDiscoverableChatsParticipantsAndRangesStoredProcedure")(c("LSFactory")(a))}function e(a){var b=d("react-compiler-runtime").c(6),e=(h||(h=c("useReStore")))(),g;b[0]!==e.tables.discoverable_chat_participants_ranges_v2__generated||b[1]!==a?(g=function(){return d("ReQL").fromTableAscending(e.tables.discoverable_chat_participants_ranges_v2__generated).getKeyRange(a)},b[0]=e.tables.discoverable_chat_participants_ranges_v2__generated,b[1]=a,b[2]=g):g=b[2];var i;b[3]!==e||b[4]!==a?(i=[e,a],b[3]=e,b[4]=a,b[5]=i):i=b[5];return d("ReQLSuspense").useFirst(g,i,f.id+":75")}g.useFetchBroadcastChannelMembers=a;g.useClearBroadcastChannelParticipantsList=b;g.useMWParticipantsForBroadcastChannelRanges=e}),98);
__d("MWQuickPromotionBroadcastChannelNuxQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8112477978830362"}),null);
__d("MWRestrictedAccountsPlusIcon",["cr:6040"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:6040")}),98);
__d("MWRestrictedAccountsList.react",["fbt","CometScrollView.react","CometTopNavListDropdownTitle.react","I64","JSResourceForInteraction","LSContactBitOffset","LSIntEnum","MWAddOnCircleContainer.react","MWRestrictedAccountsPlusIcon","MWXIcon.react","MWXLink.react","MWXListCellPressable.react","MWXProfilePhoto.react","MWXText.react","MWXTextPairing.react","ReQL","ReQLSuspense","getLSMediaContactProfilePictureUrl","promiseDone","react","react-compiler-runtime","useMWBaseChatOpenTabForUser","useMWLSJewelLoadMoreThreads","useMWNavigation","useMWXLazyDialog","useReStore","useShouldShowMessagingEntrypointInCometRoot"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||(l=d("react")),n=l.useEffect,o=c("JSResourceForInteraction")("MWRestrictedAccountsListAddRestricteeDialog.react").__setRef("MWRestrictedAccountsList.react");function a(a){var b=d("react-compiler-runtime").c(44),e=a.hidePage,g=a.onClose,l=a.selectedThreadKey,r=(i||(i=c("useReStore")))();b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=(j||(j=d("LSIntEnum"))).ofNumber(-15),b[0]=a):a=b[0];var s=c("useMWLSJewelLoadMoreThreads")(a),t=c("useShouldShowMessagingEntrypointInCometRoot")("CHAT");a=c("useMWBaseChatOpenTabForUser")(void 0,"inboxRestricted");var u=a.openTabByThreadKey;b[1]!==s?(a=function(){s()},b[1]=s,b[2]=a):a=b[2];var v;b[3]===Symbol["for"]("react.memo_cache_sentinel")?(v=[],b[3]=v):v=b[3];n(a,v);b[4]!==r.tables.contacts?(a=function(){return d("ReQL").fromTableAscending(r.tables.contacts).filter(p)},b[4]=r.tables.contacts,b[5]=a):a=b[5];b[6]!==r?(v=[r],b[6]=r,b[7]=v):v=b[7];a=d("ReQLSuspense").useArray(a,v,f.id+":82");b[8]===Symbol["for"]("react.memo_cache_sentinel")?(v=h._(/*BTDS*/"__JHASH__XwrGXRjtVxi__JHASH__"),b[8]=v):v=b[8];v=v;var w;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(w=h._(/*BTDS*/"__JHASH__RkSfcqgblez__JHASH__",[h._param("=Learn how it works",m.jsx(c("MWXLink.react"),{href:"https://www.facebook.com/help/messenger-app/1021314848608781",children:m.jsx(c("MWXText.react"),{color:"primary",type:"bodyLink4",children:h._(/*BTDS*/"__JHASH__lTWOA7Lmc04__JHASH__")})}))]),b[9]=w):w=b[9];w=w;var x;b[10]===Symbol["for"]("react.memo_cache_sentinel")?(x=h._(/*BTDS*/"__JHASH__9yvHPV04Ncn__JHASH__"),b[10]=x):x=b[10];x=x;var y;b[11]===Symbol["for"]("react.memo_cache_sentinel")?(y={},b[11]=y):y=b[11];var z=y;y=c("useMWXLazyDialog")(o);var A=y[0];b[12]!==g||b[13]!==A?(y=function(){return A(z,g)},b[12]=g,b[13]=A,b[14]=y):y=b[14];var B=y,C=c("useMWNavigation")();b[15]!==e?(y=e!=null?m.jsx(c("CometTopNavListDropdownTitle.react"),{actions:[],onReturn:e,title:v}):m.jsx(c("CometTopNavListDropdownTitle.react"),{actions:[],title:v}),b[15]=e,b[16]=y):y=b[16];b[17]===Symbol["for"]("react.memo_cache_sentinel")?(v=m.jsx("div",babelHelpers["extends"]({className:"x1k70j0n x11i5rnm xzueoph x1mh8g0r xz9dl7a x14uny0o xsag5q8 xvpee5o"},{children:m.jsx(c("MWXText.react"),{color:"secondary",type:"body4",children:w})})),e={className:"xurb0ha x1sxyh0"},b[17]=v,b[18]=e):(v=b[17],e=b[18]);b[19]===Symbol["for"]("react.memo_cache_sentinel")?(w=m.jsx(c("MWAddOnCircleContainer.react"),{size:40,children:m.jsx(c("MWXIcon.react"),{icon:c("MWRestrictedAccountsPlusIcon")})}),x=m.jsx(c("MWXTextPairing.react"),{headline:x,headlineLineLimit:1,level:4}),b[19]=w,b[20]=x):(w=b[19],x=b[20]);b[21]!==B?(w=m.jsx(c("MWXListCellPressable.react"),{addOnStart:w,content:x,onPress:function(){return B()},testid:void 0}),b[21]=B,b[22]=w):w=b[22];if(b[23]!==a||b[24]!==r||b[25]!==t||b[26]!==C||b[27]!==g||b[28]!==u||b[29]!==l){b[31]!==r||b[32]!==t||b[33]!==C||b[34]!==g||b[35]!==u||b[36]!==l?(x=function(a){var b=a.name,e=a.secondaryName,f=(k||(k=d("I64"))).to_string(a.id);return m.jsx("li",{children:m.jsx(c("MWXListCellPressable.react"),{addOnStart:m.jsx(c("MWXProfilePhoto.react"),{shape:"circle",size:40,source:{uri:c("getLSMediaContactProfilePictureUrl")(a)}}),content:m.jsx(c("MWXTextPairing.react"),{body:e!=null&&b!==e?e:null,headline:b,level:4}),onPress:function(){c("promiseDone")(q(r,a.id).then(function(b){var c=(k||(k=d("I64"))).to_string(a.id)===b;if(t){u(b,!c);return g()}C.openInbox({threadKey:k.of_string(b),threadType:c?(j||(j=d("LSIntEnum"))).ofNumber(1):(j||(j=d("LSIntEnum"))).ofNumber(15)},"inboxRestricted")}))},selected:l!=null&&(k||(k=d("I64"))).equal(a.id,l),testid:void 0},f)},f)},b[31]=r,b[32]=t,b[33]=C,b[34]=g,b[35]=u,b[36]=l,b[37]=x):x=b[37];x=a.map(x);b[23]=a;b[24]=r;b[25]=t;b[26]=C;b[27]=g;b[28]=u;b[29]=l;b[30]=x}else x=b[30];b[38]!==w||b[39]!==x?(a=m.jsxs("ul",babelHelpers["extends"]({},e,{children:[w,x]})),b[38]=w,b[39]=x,b[40]=a):a=b[40];b[41]!==y||b[42]!==a?(e=m.jsxs(c("CometScrollView.react"),{showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!0,children:[y,v,a]}),b[41]=y,b[42]=a,b[43]=e):e=b[43];return e}function p(a){return(a=d("LSContactBitOffset").has(66,a))!=null?a:!1}function q(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.mi_act_mapping_table.index("jid")).getKeyRange(b)).then(function(a){return(k||(k=d("I64"))).to_string((a=a==null?void 0:a.serverThreadKey)!=null?a:b)})}g["default"]=a}),226);
__d("MWXIconAppFacebook",["MWXSvgIcon","SVGIcon","cr:12273","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12273")),c("gkx")("23219"));g["default"]=a}),98);
__d("useMWPConversatioSearchQPLLogger",["QPLUserFlow","emptyFunction","qpl","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useMemo,k={currentResultCount:0,firstResultShowUp:!1,hasStarted:!1,instanceKey:0};function a(){var a=i(function(a){var b=a.annotations,d=a.instanceKey;a=a.point;if(!k.hasStarted)return;if(d!=null&&d!==k.instanceKey)return;c("QPLUserFlow").addPoint(c("qpl")._(25301522,"2409"),a,{data:b,instanceKey:k.instanceKey})},[]),b=i(function(a){if(!k.hasStarted)return;if(a!=null&&a!==k.instanceKey)return;k.hasStarted=!1;c("QPLUserFlow").endCancel(c("qpl")._(25301522,"2409"),{annotations:{"int":{result_count:k.currentResultCount}},instanceKey:k.instanceKey})},[]),d=i(function(a){k.hasStarted&&b();k.hasStarted=!0;k.instanceKey++;k.firstResultShowUp=!1;k.currentResultCount=0;c("QPLUserFlow").start(c("qpl")._(25301522,"2409"),{annotations:a,instanceKey:k.instanceKey});return k.instanceKey},[b]),e=i(function(a){if(!k.hasStarted)return;if(a!=null&&a!==k.instanceKey)return;k.hasStarted=!1;c("QPLUserFlow").endSuccess(c("qpl")._(25301522,"2409"),{annotations:{"int":{result_count:k.currentResultCount}},instanceKey:k.instanceKey})},[]),f=i(function(b){if(k.firstResultShowUp)return;k.firstResultShowUp=!0;a({instanceKey:b,point:"first_result_show_up"})},[a]),g=i(function(a){k.currentResultCount=a},[]),h=i(function(){return k.instanceKey},[]),l=j(function(){return{getCurrentInstanceKey:h,qplAddAnnotations:c("emptyFunction"),qplAddPoint:a,qplCancel:b,qplMarkFirstResultShowUp:f,qplStart:d,qplSuccess:e,updateCurrentResultCount:g}},[h,a,b,f,d,e,g]);return l}g["default"]=a}),98);
__d("useMWPConversationSearch",["I64","LSFactory","LSIntEnum","LSIssueMessageSearchQueryStoredProcedure","LSMessageSearchType","LSSearchRequestStatusType","MAWFTSRawStringMatcher","MAWThreadCutover","MWPConversationSearchContext.react","MWPConversationSearchLogger","MWPVisibleMessageContext.react","Promise","ReQL","ReQLSuspense","cr:7230","isMWNewSearchUXEnabled","nullthrows","promiseDone","react","react-compiler-runtime","useMWPConversatioSearchQPLLogger","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l;e=j||d("react");e.useCallback;var m=e.useContext,n=e.useEffect;e.useMemo;var o=e.useRef,p=(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE),q="useMWPConversationSearch";function r(a,b){a=[a,b].filter(Boolean);b=a.filter(function(a){return(k||(k=d("LSIntEnum"))).toNumber(a.status)===c("LSSearchRequestStatusType").COMPLETE});return b.length===0||b.length<a.length?void 0:b.reduce(function(a,b){return a+(l||(l=d("I64"))).to_float(b.resultCount)},0)}function s(a,b){if(b==null)return a==null?void 0:a.status;if(a==null)return b==null?void 0:b.status;if((k||(k=d("LSIntEnum"))).toNumber(a.status)===c("LSSearchRequestStatusType").FAILED||(k||(k=d("LSIntEnum"))).toNumber(b.status)===c("LSSearchRequestStatusType").FAILED)return(k||(k=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").FAILED);a=Math.min((k||(k=d("LSIntEnum"))).toNumber(a.status),k.toNumber(b.status));return k.ofNumber(a)}function t(a,b){c("promiseDone")(a.runInTransaction(function(a){return c("LSIssueMessageSearchQueryStoredProcedure")(c("LSFactory")(a),{nextPageCursor:b.nextPageCursor,query:b.query,threadKey:b.threadKeyV2,type_:p})},"readwrite",void 0,void 0,f.id+":100"))}function a(a){var e=d("react-compiler-runtime").c(86),g=m(d("MWPConversationSearchContext.react").context),j;e[0]!==g?(j=c("nullthrows")(g),e[0]=g,e[1]=j):j=e[1];g=j;var v=g.search,w=g.setSearch;j=c("useMWPConversatioSearchQPLLogger")();var x=j.qplCancel,y=j.qplMarkFirstResultShowUp,z=j.updateCurrentResultCount,A=o(null);g=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();var B=g.setVisibleMessage,C=(i||(i=c("useReStore")))(),D=d("MAWThreadCutover").useGetCutoverMapping(v==null?void 0:v.threadKey);e[2]!==C||e[3]!==v||e[4]!==a?(j=function(){return v!=null?d("ReQL").fromTableAscending(C.tables.message_search_queries).getKeyRange(p,v.query,a):d("ReQL").empty()},g=[C,v,a],e[2]=C,e[3]=v,e[4]=a,e[5]=j,e[6]=g):(j=e[5],g=e[6]);var E=d("ReQLSuspense").useFirst(j,g,f.id+":141");e[7]!==D||e[8]!==C||e[9]!==v?(j=function(){return v!=null&&D!=null&&D.showOpenMessageHistory===!0?d("ReQL").fromTableAscending(C.tables.message_search_queries).getKeyRange(p,v.query,D.openThreadId):d("ReQL").empty()},g=[C,v,D],e[7]=D,e[8]=C,e[9]=v,e[10]=j,e[11]=g):(j=e[10],g=e[11]);var F=d("ReQLSuspense").useFirst(j,g,f.id+":153"),G=v==null?void 0:v.query;e[12]!==x||e[13]!==v?(j=function(){v==null&&x()},g=[x,v],e[12]=x,e[13]=v,e[14]=j,e[15]=g):(j=e[14],g=e[15]);n(j,g);e[16]===Symbol["for"]("react.memo_cache_sentinel")?(j=function(){var a,e;e=null;c("promiseDone")((h||(h=b("Promise"))).all([(a=b("cr:7230")==null?void 0:b("cr:7230").getInstance().then(function(a){e=a}))!=null?a:(h||(h=b("Promise"))).resolve(),d("MAWFTSRawStringMatcher").load().then(function(a){A.current=a})]));return function(){var a;(a=e)==null?void 0:a.removeNewMessagesListener(q)}},g=[],e[16]=j,e[17]=g):(j=e[16],g=e[17]);n(j,g);e[18]!==B?(j=function(a){B(function(b){return{contextLine:(b=a.contextLine)!=null?b:"",highlights:a.matchOffsets!=null&&a.matchLengths!=null?u(a.matchOffsets,a.matchLengths):[],messageId:a.messageId,messageOtid:a.messageOtid,source:"Search",timestamp:c("nullthrows")(a.messageTimestampMs)}})},e[18]=B,e[19]=j):j=e[19];var H=j;e[20]!==C||e[21]!==G||e[22]!==a?(g=function(){return G!=null?d("ReQL").fromTableAscending(C.tables.message_search_results).getKeyRange(p,G,a):d("ReQL").empty()},j=[C,G,a],e[20]=C,e[21]=G,e[22]=a,e[23]=g,e[24]=j):(g=e[23],j=e[24]);g=d("ReQLSuspense").useArray(g,j,f.id+":219");var I;e[25]!==D||e[26]!==C||e[27]!==G?(j=function(){return G!=null&&D!=null&&D.showOpenMessageHistory===!0?d("ReQL").fromTableAscending(C.tables.message_search_results).getKeyRange(p,G,D.openThreadId):d("ReQL").empty()},I=[C,G,D],e[25]=D,e[26]=C,e[27]=G,e[28]=j,e[29]=I):(j=e[28],I=e[29]);j=d("ReQLSuspense").useArray(j,I,f.id+":232");e[30]!==j||e[31]!==g?(I=[].concat(g,j),e[30]=j,e[31]=g,e[32]=I):I=e[32];j=I;var J=j;e[33]!==J.length||e[34]!==z?(g=function(){z(J.length)},e[33]=J.length,e[34]=z,e[35]=g):g=e[35];e[36]!==J||e[37]!==z?(I=[J,z],e[36]=J,e[37]=z,e[38]=I):I=e[38];n(g,I);var K=o(),L=v==null?void 0:v.selectedSearchResultIndex;e[39]!==J||e[40]!==H||e[41]!==y||e[42]!==L?(j=function(){if(J.length>0&&L!=null&&L<J.length){var a=J[L];K.current!==a&&(y(),c("isMWNewSearchUXEnabled")()||(c("MWPConversationSearchLogger").logMessageSearchMsgImpression(),H(a)),K.current=a)}},e[39]=J,e[40]=H,e[41]=y,e[42]=L,e[43]=j):j=e[43];e[44]!==J||e[45]!==H||e[46]!==y||e[47]!==L||e[48]!==B?(g=[H,J,L,B,y],e[44]=J,e[45]=H,e[46]=y,e[47]=L,e[48]=B,e[49]=g):g=e[49];n(j,g);e[50]!==H?(I=function(a){H(a)},e[50]=H,e[51]=I):I=e[51];j=I;e[52]!==J.length||e[53]!==C||e[54]!==F||e[55]!==E||e[56]!==v||e[57]!==L||e[58]!==w?(g=function(){if(v==null)return null;L===J.length-1&&(E==null?void 0:E.hasNextPage)===!0?t(C,E):L===J.length-1&&(F==null?void 0:F.hasNextPage)===!0&&t(C,F);w(babelHelpers["extends"]({},v,{selectedSearchResultIndex:v.selectedSearchResultIndex+1}));return v.selectedSearchResultIndex+1},e[52]=J.length,e[53]=C,e[54]=F,e[55]=E,e[56]=v,e[57]=L,e[58]=w,e[59]=g):g=e[59];I=g;e[60]!==v||e[61]!==w?(g=function(){if(v==null)return null;w(babelHelpers["extends"]({},v,{selectedSearchResultIndex:v.selectedSearchResultIndex-1}));return v.selectedSearchResultIndex-1},e[60]=v,e[61]=w,e[62]=g):g=e[62];g=g;var M;e[63]!==F||e[64]!==E?(M=s(E,F),e[63]=F,e[64]=E,e[65]=M):M=e[65];var N=M;M=(E==null?void 0:E.hasNextPage)===!0||(F==null?void 0:F.hasNextPage)===!0;var O;e[66]!==C||e[67]!==F||e[68]!==E||e[69]!==v||e[70]!==N?(O=function(){var a;if(v==null||(l||(l=d("I64"))).equal((a=N)!=null?a:(l||(l=d("I64"))).zero,(k||(k=d("LSIntEnum"))).ofNumber(c("LSSearchRequestStatusType").PENDING)))return;(E==null?void 0:E.hasNextPage)===!0?t(C,E):(F==null?void 0:F.hasNextPage)===!0&&t(C,F)},e[66]=C,e[67]=F,e[68]=E,e[69]=v,e[70]=N,e[71]=O):O=e[71];O=O;var P;e[72]!==F||e[73]!==E?(P=r(E,F),e[72]=F,e[73]=E,e[74]=P):P=e[74];P=P;var Q=v==null?void 0:v.query,R;e[75]!==P||e[76]!==J||e[77]!==M||e[78]!==O||e[79]!==j||e[80]!==I||e[81]!==g||e[82]!==L||e[83]!==N||e[84]!==Q?(R={hasMore:M,loadMore:O,navigateToResult:j,next:I,previous:g,query:Q,resultCount:P,searchResults:J,selectedSearchResultIndex:L,status:N},e[75]=P,e[76]=J,e[77]=M,e[78]=O,e[79]=j,e[80]=I,e[81]=g,e[82]=L,e[83]=N,e[84]=Q,e[85]=R):R=e[85];return R}function u(a,b){a=a.split(",");var c=b.split(",");return a.map(function(a,b){return{matchLength:parseInt(c[b],10),matchOffset:parseInt(a,10)}})}g["default"]=a}),98);
__d("useMWPStartConversationSearch",["Int64Hooks","LSClearMessageSearchTableStoredProcedure","LSFactory","LSIntEnum","LSIssueMessageSearchQueryStoredProcedure","LSMessageSearchType","MAWThreadCutover","MWPActor.react","MWPConversationSearchContext.react","MWPVisibleMessageContext.react","asyncToGeneratorRuntime","cr:7242","nullthrows","promiseDone","react","react-compiler-runtime","useMWPConversatioSearchQPLLogger","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(i||d("react")).useContext,l=(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE);function a(a){var e=d("react-compiler-runtime").c(10),g=d("MWPActor.react").useActor(),i=(h||(h=c("useReStore")))(),j=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext(),n=j.setVisibleMessage,p=c("useMWPConversatioSearchQPLLogger")();j=k(d("MWPConversationSearchContext.react").context);var q;e[0]!==j?(q=c("nullthrows")(j),e[0]=j,e[1]=q):q=e[1];j=q;var r=j.setSearch;e[2]!==g||e[3]!==i||e[4]!==p||e[5]!==r||e[6]!==n||e[7]!==a?(q=function(e,h){r({query:e,selectedSearchResultIndex:0,threadKey:a});n(o);var j=function(){var j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield i.runInTransaction(m,"readwrite",void 0,void 0,f.id+":61"),p.qplStart({bool:{isInThread:!0,isSecure:h}}),h&&b("cr:7242")!=null?(c("promiseDone")(b("cr:7242").searchSecureDatabaseMessages(e,a,g,i,{flow:p,instanceKey:p.getCurrentInstanceKey()})),c("promiseDone")(d("MAWThreadCutover").getCutoverThreadBySecureThreadKey(a),function(a){a!=null&&a.showOpenMessageHistory===!0&&c("promiseDone")(i.runInTransaction(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield c("LSIssueMessageSearchQueryStoredProcedure")(c("LSFactory")(b),{query:e,threadKey:a.openThreadId,type_:l})});return function(a){return d.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":89"))})):c("promiseDone")(i.runInTransaction(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield c("LSIssueMessageSearchQueryStoredProcedure")(c("LSFactory")(b),{query:e,threadKey:a,type_:l})});return function(a){return d.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":105"))});return function(){return j.apply(this,arguments)}}();c("promiseDone")(j())},j=[r,a,n,i,g,p],e[2]=g,e[3]=i,e[4]=p,e[5]=r,e[6]=n,e[7]=a,e[8]=q,e[9]=j):(q=e[8],j=e[9]);e=d("Int64Hooks").useCallbackInt64(q,j);return e}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield c("LSClearMessageSearchTableStoredProcedure")(c("LSFactory")(a),{type_:l})});return n.apply(this,arguments)}function o(a){}g["default"]=a}),98);
__d("useMWPThreadPointQueryOneToOneCutoverThreadThenNavigate",["I64","LSFactory","LSPlatformWaitForTaskCompletion","LSThreadAttributionStore","LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure","MAWCutoverQPLLogger","MAWJids","QPLUserFlow","ReQL","WABridgedAPI","WALoggerDeferred","asyncToGeneratorRuntime","justknobx","promiseDone","qpl","react","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Thread-Point-Query][OD-Cutover] LSThreadPointQueryAndRestoreMessagesWithJID finished successfully for ThreadKey: ",""]);k=function(){return a};return a}var l=(h||d("react")).useCallback,m=c("justknobx")._("2707");function a(){var a=c("useAsyncReStore")();return l(function(e){var f=e.contactId,g=e.isOnDemandCutover,h=e.navigationApi,l=e.qplInstanceKey;d("MAWCutoverQPLLogger").addPoint(l,"tpq_then_navigate_started");d("MAWCutoverQPLLogger").addAnnotations(l,{bool:{is_od_cutover:(e=g)!=null?e:!1}});c("promiseDone")(a,function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){function e(a,b){var e=a.clientThreadKey,g=a.threadKey;a=a.threadType;c("promiseDone")(c("WABridgedAPI").getDevices({ignoreDhash:!1,reason:"thread-point-querying-1-to-1-thread",users:new Set().add(d("MAWJids").toUserJid((i||(i=d("I64"))).to_string(f)))}));d("MAWCutoverQPLLogger").addPoint(l,"navigate_to_thread");d("MAWCutoverQPLLogger").endSuccess(l);h.openTabOrInbox({clientThreadKey:e,threadKey:g,threadType:a},(e=b)!=null?e:"preCutoverThread",void 0,void 0,{subEntrypoint:"threadPointQuery1To1"})}var o=d("ReQL").fromTableAscending(a.tables.mi_act_mapping_table.index("jid")).getKeyRange(f);if(m){var p=(yield d("ReQL").firstAsync(o));d("MAWCutoverQPLLogger").addPoint(l,"check_existing_mapping");d("MAWCutoverQPLLogger").addAnnotations(l,{bool:{has_mi_act_mapping:p!=null}});p=p!=null?yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(p.serverThreadKey)):null;if(p!=null)if(g===!0){var q=n(f,p.threadKey);e(p,q)}else e(p)}o.subscribe(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c){b=c.operation;if(b==="delete")return;d("MAWCutoverQPLLogger").addPoint(l,"mi_act_mapping_table_updated");c=(yield d("ReQL").firstAsync(o));if(c==null)return;d("MAWCutoverQPLLogger").addPoint(l,"mi_act_mapping_table_non_null");b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(c.serverThreadKey)));if(b==null)return;d("MAWCutoverQPLLogger").addPoint(l,"thread_non_null");if(g===!0){c=n(f,b.threadKey);e(b,c)}else e(b)});return function(a,b){return c.apply(this,arguments)}}());d("MAWCutoverQPLLogger").addPoint(l,"thread_point_query_started");c("LSPlatformWaitForTaskCompletion")(a,function(a){return c("LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure")(c("LSFactory")(a),{waJid:f})},"readwrite").then(function(){d("MAWCutoverQPLLogger").addPoint(l,"thread_point_query_succeeded"),c("promiseDone")(d("WALoggerDeferred").LOG(k(),(i||(i=d("I64"))).to_string(f))),g===!0&&c("QPLUserFlow").endSuccess(c("qpl")._(1056847893,"505"))})["catch"](function(a){d("MAWCutoverQPLLogger").endFailure(l,"TPQFailure");a="[Thread-Point-Query][OD-Cutover] LSThreadPointQueryAndRestoreMessagesWithJID finished with an error for ThreadKey: "+(i||(i=d("I64"))).to_string(f)+"\nError: "+a;c("promiseDone")(d("WALoggerDeferred").LOG(j(),a));g===!0&&c("QPLUserFlow").endFailure(c("qpl")._(1056847893,"505"),a)})});return function(b){return a.apply(this,arguments)}}())},[a])}function n(a,b){var c=d("LSThreadAttributionStore").getSource(void 0,(i||(i=d("I64"))).to_string(b));if(c.type==="MWLSEntrypoint"&&c.value!=="unknown")return c.value;c=d("LSThreadAttributionStore").getSource(void 0,i.to_string(a));if(c.type==="MWLSEntrypoint"&&c.value!=="unknown"){d("LSThreadAttributionStore").setSource((i||(i=d("I64"))).to_string(b),c.value);return c.value}return void 0}g["default"]=a}),98);